<% content_for :typeform_head do %>
<style type="text/css">
  html {
    margin: 0;
    /*height: 100%;*/
    overflow: hidden;
    height: 100%!important;
  }
  iframe {
    position: absolute;
    left:0;
    right:0;
    bottom:0;
    top:0;
    border:0;
  }
</style>
<% end %>

<div class="loader"></div>
<script type="text/javascript" src="https://s3-eu-west-1.amazonaws.com/share.typeform.com/embed.js"></script>
<iframe id="typeform-full" width="100%" height="100%" frameborder="0" src="<%= @condition_form %>"></iframe>

<script type="text/javascript">
$(function() {
  var opts, spinner, target;
  opts = {
    lines: 15,
    length: 2.3,
    width: 2.5,
    radius: 13,
    color: '#000',
    speed: 2.1,
    trail: 60,
    shadow: !1,
    hwaccel: !1,
    className: 'spinner',
    top: '50%',
    left: '50%',
    position: 'absolute'
  };
  
  target = $('.loader')[0];
  spinner = new Spinner(opts).spin(target);
  
  $('#typeform-full').on('load', function() {
    return spinner.stop();
  });
});
</script>
